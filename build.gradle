plugins {
    id 'org.jetbrains.kotlin.jvm' version '2.0.0'
}

group = 'com.yh'
version = '0.1'

repositories {
    mavenCentral()
}

dependencies {
    implementation libs.kotlinx.coroutines.core
    implementation libs.kotlinx.serialization.json
    implementation libs.dom4j
    implementation libs.jsoup
    implementation 'com.google.code.gson:gson:2.10.1'

    testImplementation libs.kotlin.test
}

test {
    useJUnitPlatform()
}
kotlin {
    jvmToolchain(17)
}
jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    manifest {
        attributes(
                'Main-Class': 'com.yh.module_crawler.utils.BiliKt'
        )
    }
    from configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }

    // 获取主要源集
    def sourcesMain = sourceSets.main
    sourcesMain.allSource.each { source ->
        println("add from sources: ${source.name}")
    }
    from sourcesMain.output
}